window.Affiliate=function(l){function c(h){if(f[h])return f[h].exports;var k=f[h]={i:h,l:!1,exports:{}};l[h].call(k.exports,k,k.exports,c);k.l=!0;return k.exports}var f={};c.m=l;c.c=f;c.d=function(h,k,e){c.o(h,k)||Object.defineProperty(h,k,{configurable:!1,enumerable:!0,get:e})};c.n=function(h){var k=h&&h.__esModule?function(){return h["default"]}:function(){return h};c.d(k,"a",k);return k};c.o=function(c,k){return Object.prototype.hasOwnProperty.call(c,k)};c.p="";return c(c.s=0)}([function(l,c,f){var h=
f(1),k=f(5),e=[],p=function(){var b={},a;for(a in arguments)for(var d in arguments[a])b[d]=arguments[a][d];return b},g=Function.prototype.bind,q=Array.prototype.slice,m=function(b,a){if(g&&b.bind===g)return g.apply(b,q.call(arguments,1));var d=q.call(arguments,2);return function(){return b.apply(a,d.concat(q.call(arguments)))}},r=function(){console&&console.log&&m(console.error,console,"[Affiliate] ")(arguments)},t=function(){console&&console.error&&m(console.error,console,"[Affiliate] ")(arguments)},
u=function(b){b=p({log:!1,tags:[]},b);var a=[];for(e in b.tags)b.tags[e]=p({hosts:[],query:{},replace:[]},b.tags[e]),a=a.concat(b.tags[e].hosts);var d=!0,c=!1;var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;"undefined"===typeof e&&(d=!1);var f=function(d){b.log&&r("Traversing DOM...");var c=d.getElementsByTagName("a"),e=[];for(n in c)c.hasOwnProperty(n)&&(e[n]=c[n]);"a"===d.nodeName.toLowerCase()&&(e=[d]);b.log&&r(e);for(var w in e)if(d=void 0,(c=e[w])&&c.getAttribute("href")){var n=
h(c.getAttribute("href")||"",!0);if(-1!==a.indexOf(n.host))for(d in b.tags)if(0<=b.tags[d].hosts.indexOf(n.host)){var f=void 0,g=n,l=c,q=b.tags[d],m=k.get(l)||{};if(!m.to||m.to!==g.href){m=g.href;b.log&&r("Discovered URL: "+g.href);g.set("query",p(g.query,q.query));if("function"===typeof q.modifyPath)try{g.set("pathname",q.modifyPath(g.pathname))}catch(v){t(v)}if("function"===typeof q.modifyHost)try{g.set("host",q.modifyHost(g.host))}catch(v){t(v)}g=g.href;for(f in q.replace)g=g.replace(q.replace[f].from,
q.replace[f].to);l.setAttribute("href",g);k.set(l,{href:m,to:g})}}}};d&&(this.observer=new e(function(a){b.log&&r("DOM Mutation",a);for(var d in a){if("attributes"===a[d].type){if("href"!==a[d].attributeName)continue;var c=a[d].target.getAttribute("href"),e=k.get(a[d].target)||{};if(e.to&&e.to===c)continue}f(a[d].target)}}));this.attach=m(function(){if(!c){if("complete"===document.readyState||"interactive"===document.readyState)c=!0,f(document.body);else return window.addEventListener("DOMContentLoaded",
this.attach);d?this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}):b.log&&r("Browser does not support MutationObserver.")}},this);this.detach=m(function(){d&&(c=!1,this.observer.disconnect(),b.log&&r("Observer disconnected."))},this)};c=function(b){b=new u(b);e.push(b);return b};c.instances=function(){return[].concat(e)};c.detachAll=function(){for(var b in e)e[b].detach()};c.revert=m(function(){this.detachAll();var b=[].slice.call(document.body.getElementsByTagName("a")),
a;for(a in b){var d=k.get(b[a]);d&&d.href&&(b[a].setAttribute("href",d.href),k.set(b[a],{}))}},c);l.exports=c},function(l,c,f){(function(c){function k(b){b=b||c.location||{};var a={},d=typeof b,e;if("blob:"===b.protocol)a=new h(unescape(b.pathname),{});else if("string"===d)for(e in a=new h(b,{}),u)delete a[e];else if("object"===d){for(e in b)e in u||(a[e]=b[e]);void 0===a.slashes&&(a.slashes=r.test(b.href))}return a}function e(b){b=m.exec(b);return{protocol:b[1]?b[1].toLowerCase():"",slashes:!!b[2],
rest:b[3]}}function h(b,a,d){if(!(this instanceof h))return new h(b,a,d);var c=t.slice();var f=typeof a;var l=0;"object"!==f&&"string"!==f&&(d=a,a=null);d&&"function"!==typeof d&&(d=q.parse);a=k(a);var n=e(b||"");f=!n.protocol&&!n.slashes;this.slashes=n.slashes||f&&a.slashes;this.protocol=n.protocol||a.protocol||"";b=n.rest;for(n.slashes||(c[2]=[/(.*)/,"pathname"]);l<c.length;l++){n=c[l];var p=n[0];var m=n[1];if(p!==p)this[m]=b;else if("string"===typeof p)~(p=b.indexOf(p))&&("number"===typeof n[2]?
(this[m]=b.slice(0,p),b=b.slice(p+n[2])):(this[m]=b.slice(p),b=b.slice(0,p)));else if(p=p.exec(b))this[m]=p[1],b=b.slice(0,p.index);this[m]=this[m]||(f&&n[3]?a[m]||"":"");n[4]&&(this[m]=this[m].toLowerCase())}d&&(this.query=d(this.query));if(f&&a.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==a.pathname)){b=this.pathname;a=(a.pathname||"/").split("/").slice(0,-1).concat(b.split("/"));b=a.length;d=a[b-1];c=!1;for(l=0;b--;)"."===a[b]?a.splice(b,1):".."===a[b]?(a.splice(b,1),l++):
l&&(0===b&&(c=!0),a.splice(b,1),l--);c&&a.unshift("");"."!==d&&".."!==d||a.push("");this.pathname=a.join("/")}g(this.port,this.protocol)||(this.host=this.hostname,this.port="");this.username=this.password="";this.auth&&(n=this.auth.split(":"),this.username=n[0]||"",this.password=n[1]||"");this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null";this.href=this.toString()}var g=f(3),q=f(4),m=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,
t=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};h.prototype={set:function(b,a,d){switch(b){case "query":"string"===typeof a&&a.length&&(a=(d||q.parse)(a));this[b]=a;break;case "port":this[b]=a;g(a,this.protocol)?a&&(this.host=this.hostname+":"+a):(this.host=this.hostname,this[b]="");break;case "hostname":this[b]=a;this.port&&(a+=":"+this.port);this.host=a;break;case "host":this[b]=a;/:\d+$/.test(a)?
(a=a.split(":"),this.port=a.pop(),this.hostname=a.join(":")):(this.hostname=a,this.port="");break;case "protocol":this.protocol=a.toLowerCase();this.slashes=!d;break;case "pathname":case "hash":a?(d="pathname"===b?"/":"#",this[b]=a.charAt(0)!==d?d+a:a):this[b]=a;break;default:this[b]=a}for(b=0;b<t.length;b++)a=t[b],a[4]&&(this[a[1]]=this[a[1]].toLowerCase());this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null";this.href=this.toString();return this},toString:function(b){b&&
"function"===typeof b||(b=q.stringify);var a=this.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");a+=this.slashes?"//":"";this.username&&(a+=this.username,this.password&&(a+=":"+this.password),a+="@");a+=this.host+this.pathname;(b="object"===typeof this.query?b(this.query):this.query)&&(a+="?"!==b.charAt(0)?"?"+b:b);this.hash&&(a+=this.hash);return a}};h.extractProtocol=e;h.location=k;h.qs=q;l.exports=h}).call(c,f(2))},function(l,c){c=function(){return this}();try{c=c||Function("return this")()||
(0,eval)("this")}catch(f){"object"===typeof window&&(c=window)}l.exports=c},function(l,c,f){l.exports=function(c,k){k=k.split(":")[0];c=+c;if(!c)return!1;switch(k){case "http":case "ws":return 80!==c;case "https":case "wss":return 443!==c;case "ftp":return 21!==c;case "gopher":return 70!==c;case "file":return!1}return 0!==c}},function(l,c,f){var h=Object.prototype.hasOwnProperty;c.stringify=function(c,e){e=e||"";var f=[];"string"!==typeof e&&(e="?");for(var g in c)h.call(c,g)&&f.push(encodeURIComponent(g)+
"="+encodeURIComponent(c[g]));return f.length?e+f.join("&"):""};c.parse=function(c){for(var e=/([^=?&]+)=?([^&]*)/g,f={},g;g=e.exec(c);f[decodeURIComponent(g[1].replace(/\+/g," "))]=decodeURIComponent(g[2].replace(/\+/g," ")));return f}},function(l,c,f){l.exports=f(6)},function(l,c){var f=0<=["loaded","interactive","complete"].indexOf(document.readyState),h=Function.prototype.bind,k=Array.prototype.slice,e=function(a,b){if(h&&a.bind===h)return h.apply(a,k.call(arguments,1));var d=k.call(arguments,
2);return function(){return a.apply(b,d.concat(k.call(arguments)))}},p=function(){console&&console.error&&e(console.error,console,"Docile: ")(arguments)},g=function(a){var b=a.getAttribute("data-docile-id");b||(b=Math.random().toString(36).substr(2),a.setAttribute("data-docile-id",b));return b},q=function(a){if(!f)return p("DOM not loaded. Learn more: https://goo.gl/EsYspK"),null;if("object"===typeof a||"string"===typeof a&&(a=document.getElementById(a)))return a;p("Unable to resolve node.")},m=function(a,
b){try{document.head.setAttribute("data-docile-store",JSON.stringify({store:a,linkStore:b}))}catch(w){p("Data could not be saved.")}},r=function(a,b,c){a.linkStore[this.id]=a.linkStore[this.id]||{};if("string"===typeof b){c=q(c);if(!c)return;a.linkStore[this.id][b]=g(c)}else if("object"===typeof b)for(var d in b)this.set(d,b[d]);m(a.store,a.linkStore);return this},t=function(a,b){a.linkStore[this.id]=a.linkStore[this.id]||{};if(b)return"string"!==typeof b?p("Link name must be a string."):document.querySelector('[data-docile-id="'+
a.linkStore[this.id][b]+'"]');b={};for(var c in a.linkStore[this.id])b[c]=document.querySelector('[data-docile-id="'+a.linkStore[this.id][c]+'"]');return b},u=function(a,b){if(b)return a.get(this.get(b));b=this.get();for(var c in b)b[c]=a.get(b[c]);return b};c={};c.get=e(function(a){if(a=q(a))return a=g(a),this.store[a]},c);c.set=e(function(a,b){if(a=q(a))return a=g(a),this.store[a]=b,m(this.store,this.linkStore),this},c);c.link=e(function(a){if(a=q(a)){a=g(a);var b={};b.id=a;b.set=e(r,b,this);b.get=
e(t,b,this);b.getData=e(u,b,this);return b}},c);var b=function(){var a={store:{},linkStore:{}};document.head.getAttribute("data-docile-store")||document.head.setAttribute("data-docile-store",'{"store":{},"linkStore":{}}');try{a=JSON.parse(document.head.getAttribute("data-docile-store"))}catch(d){p("Data could not be resumed.")}return a}();c.store=b.store||{};c.linkStore=b.linkStore||{};window.addEventListener("DOMContentLoaded",function(){f=!0});l.exports=c}]);
