window.Affiliate=function(e){function a(f){if(d[f])return d[f].exports;var g=d[f]={i:f,l:!1,exports:{}};e[f].call(g.exports,g,g.exports,a);g.l=!0;return g.exports}var d={};a.m=e;a.c=d;a.d=function(f,g,l){a.o(f,g)||Object.defineProperty(f,g,{configurable:!1,enumerable:!0,get:l})};a.n=function(f){var g=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(g,"a",g);return g};a.o=function(a,g){return Object.prototype.hasOwnProperty.call(a,g)};a.p="";return a(a.s=0)}([function(e,a,d){var f=
d(1),g=d(5),l=[],n=function(){var a={},g;for(g in arguments)for(var f in arguments[g])a[f]=arguments[g][f];return a},p=console.log.bind(window,"Affiliate: "),q=console.error.bind(window,"Affiliate: "),r=function(a){a=n({log:!1,tags:[]},a);var l=[];for(b in a.tags)a.tags[b]=n({hosts:[],query:{},replace:[]},a.tags[b]),l=l.concat(a.tags[b].hosts);var d=!0,c=!1;var b=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;"undefined"===typeof b&&(d=!1);var k=function(b){a.log&&
p("Traversing DOM...");var c=b.getElementsByTagName("a"),k=[];for(d in c)c.hasOwnProperty(d)&&(k[d]=c[d]);"a"===b.nodeName.toLowerCase()&&(k=[b]);a.log&&p(k);for(var v in k)if(b=void 0,(c=k[v])&&c.getAttribute("href")){var d=f(c.getAttribute("href")||"",!0);if(-1!==l.indexOf(d.host))for(b in a.tags)if(0<=a.tags[b].hosts.indexOf(d.host)){var e=void 0,h=d,t=c,m=a.tags[b],r=g.get(t)||{};if(!r.to||r.to!==h.href){r=h.href;a.log&&p("Discovered URL: "+h.href);h.set("query",n(h.query,m.query));if("function"===
typeof m.modifyPath)try{h.set("pathname",m.modifyPath(h.pathname))}catch(u){q(u)}if("function"===typeof m.modifyHost)try{h.set("host",m.modifyHost(h.host))}catch(u){q(u)}h=h.href;for(e in m.replace)h=h.replace(m.replace[e].from,m.replace[e].to);t.setAttribute("href",h);g.set(t,{href:r,to:h})}}}};d&&(this.observer=new b(function(b){a.log&&p("DOM Mutation",b);for(var c in b){if("attributes"===b[c].type){if("href"!==b[c].attributeName)continue;var f=b[c].target.getAttribute("href"),d=g.get(b[c].target)||
{};if(d.to&&d.to===f)continue}k(b[c].target)}}));this.attach=function(){if(!c){if("complete"===document.readyState||"interactive"===document.readyState)c=!0,k(document.body);else return window.addEventListener("DOMContentLoaded",this.attach);d?this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}):a.log&&p("Browser does not support MutationObserver.")}}.bind(this);this.detach=function(){d&&(c=!1,this.observer.disconnect(),a.log&&p("Observer disconnected."))}.bind(this)};
a=function(a){a=new r(a);l.push(a);return a};a.instances=function(){return[].concat(l)};a.detachAll=function(){for(var a in l)l[a].detach()};a.revert=function(){this.detachAll();var a=[].slice.call(document.body.getElementsByTagName("a")),f;for(f in a){var d=g.get(a[f]);d&&d.href&&(a[f].setAttribute("href",d.href),g.set(a[f],{}))}}.bind(a);e.exports=a},function(e,a,d){(function(a){function g(c){c=c||a.location||{};var b={},k=typeof c,f;if("blob:"===c.protocol)b=new n(unescape(c.pathname),{});else if("string"===
k)for(f in b=new n(c,{}),m)delete b[f];else if("object"===k){for(f in c)f in m||(b[f]=c[f]);void 0===b.slashes&&(b.slashes=h.test(c.href))}return b}function f(c){c=r.exec(c);return{protocol:c[1]?c[1].toLowerCase():"",slashes:!!c[2],rest:c[3]}}function n(c,b,a){if(!(this instanceof n))return new n(c,b,a);var k=t.slice();var d=typeof b;var l=0;"object"!==d&&"string"!==d&&(a=b,b=null);a&&"function"!==typeof a&&(a=q.parse);b=g(b);var e=f(c||"");d=!e.protocol&&!e.slashes;this.slashes=e.slashes||d&&b.slashes;
this.protocol=e.protocol||b.protocol||"";c=e.rest;for(e.slashes||(k[2]=[/(.*)/,"pathname"]);l<k.length;l++){e=k[l];var h=e[0];var m=e[1];if(h!==h)this[m]=c;else if("string"===typeof h)~(h=c.indexOf(h))&&("number"===typeof e[2]?(this[m]=c.slice(0,h),c=c.slice(h+e[2])):(this[m]=c.slice(h),c=c.slice(0,h)));else if(h=h.exec(c))this[m]=h[1],c=c.slice(0,h.index);this[m]=this[m]||(d&&e[3]?b[m]||"":"");e[4]&&(this[m]=this[m].toLowerCase())}a&&(this.query=a(this.query));if(d&&b.slashes&&"/"!==this.pathname.charAt(0)&&
(""!==this.pathname||""!==b.pathname)){c=this.pathname;b=(b.pathname||"/").split("/").slice(0,-1).concat(c.split("/"));c=b.length;a=b[c-1];k=!1;for(l=0;c--;)"."===b[c]?b.splice(c,1):".."===b[c]?(b.splice(c,1),l++):l&&(0===c&&(k=!0),b.splice(c,1),l--);k&&b.unshift("");"."!==a&&".."!==a||b.push("");this.pathname=b.join("/")}p(this.port,this.protocol)||(this.host=this.hostname,this.port="");this.username=this.password="";this.auth&&(e=this.auth.split(":"),this.username=e[0]||"",this.password=e[1]||"");
this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null";this.href=this.toString()}var p=d(3),q=d(4),r=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,h=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,t=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],m={hash:1,query:1};n.prototype={set:function(a,b,k){switch(a){case "query":"string"===typeof b&&b.length&&(b=(k||q.parse)(b));this[a]=b;break;
case "port":this[a]=b;p(b,this.protocol)?b&&(this.host=this.hostname+":"+b):(this.host=this.hostname,this[a]="");break;case "hostname":this[a]=b;this.port&&(b+=":"+this.port);this.host=b;break;case "host":this[a]=b;/:\d+$/.test(b)?(b=b.split(":"),this.port=b.pop(),this.hostname=b.join(":")):(this.hostname=b,this.port="");break;case "protocol":this.protocol=b.toLowerCase();this.slashes=!k;break;case "pathname":case "hash":b?(k="pathname"===a?"/":"#",this[a]=b.charAt(0)!==k?k+b:b):this[a]=b;break;default:this[a]=
b}for(a=0;a<t.length;a++)b=t[a],b[4]&&(this[b[1]]=this[b[1]].toLowerCase());this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null";this.href=this.toString();return this},toString:function(a){a&&"function"===typeof a||(a=q.stringify);var b=this.protocol;b&&":"!==b.charAt(b.length-1)&&(b+=":");b+=this.slashes?"//":"";this.username&&(b+=this.username,this.password&&(b+=":"+this.password),b+="@");b+=this.host+this.pathname;(a="object"===typeof this.query?a(this.query):
this.query)&&(b+="?"!==a.charAt(0)?"?"+a:a);this.hash&&(b+=this.hash);return b}};n.extractProtocol=f;n.location=g;n.qs=q;e.exports=n}).call(a,d(2))},function(e,a){a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(d){"object"===typeof window&&(a=window)}e.exports=a},function(e,a,d){e.exports=function(a,d){d=d.split(":")[0];a=+a;if(!a)return!1;switch(d){case "http":case "ws":return 80!==a;case "https":case "wss":return 443!==a;case "ftp":return 21!==a;case "gopher":return 70!==
a;case "file":return!1}return 0!==a}},function(e,a,d){var f=Object.prototype.hasOwnProperty;a.stringify=function(a,d){d=d||"";var e=[];"string"!==typeof d&&(d="?");for(var g in a)f.call(a,g)&&e.push(encodeURIComponent(g)+"="+encodeURIComponent(a[g]));return e.length?d+e.join("&"):""};a.parse=function(a){for(var d=/([^=?&]+)=?([^&]*)/g,f={},e;e=d.exec(a);f[decodeURIComponent(e[1].replace(/\+/g," "))]=decodeURIComponent(e[2].replace(/\+/g," ")));return f}},function(e,a,d){e.exports=d(6)},function(e,
a){var d=0<=["loaded","interactive","complete"].indexOf(document.readyState),f=Function.prototype.bind,g=Array.prototype.slice,l=function(b,a){if(f&&b.bind===f)return f.apply(b,g.call(arguments,1));var k=g.call(arguments,2);return function(){return b.apply(a,k.concat(g.call(arguments)))}},n=function(){console&&console.error&&l(console.error,console,"Docile: ")(arguments)},p=function(b){var a=b.getAttribute("data-docile-id");a||(a=Math.random().toString(36).substr(2),b.setAttribute("data-docile-id",
a));return a},q=function(b){if(!d)return n("DOM not loaded. Learn more: https://goo.gl/EsYspK"),null;if("object"===typeof b||"string"===typeof b&&(b=document.getElementById(b)))return b;n("Unable to resolve node.")},r=function(b,a){try{document.head.setAttribute("data-docile-store",JSON.stringify({store:b,linkStore:a}))}catch(v){n("Data could not be saved.")}},h=function(b,a,c){b.linkStore[this.id]=b.linkStore[this.id]||{};if("string"===typeof a){c=q(c);if(!c)return;b.linkStore[this.id][a]=p(c)}else if("object"===
typeof a)for(var d in a)this.set(d,a[d]);r(b.store,b.linkStore);return this},t=function(b,a){b.linkStore[this.id]=b.linkStore[this.id]||{};if(a)return"string"!==typeof a?n("Link name must be a string."):document.querySelector('[data-docile-id="'+b.linkStore[this.id][a]+'"]');a={};for(var c in b.linkStore[this.id])a[c]=document.querySelector('[data-docile-id="'+b.linkStore[this.id][c]+'"]');return a},m=function(b,a){if(a)return b.get(this.get(a));a=this.get();for(var c in a)a[c]=b.get(a[c]);return a};
a={};a.get=l(function(a){if(a=q(a))return a=p(a),this.store[a]},a);a.set=l(function(a,c){if(a=q(a))return a=p(a),this.store[a]=c,r(this.store,this.linkStore),this},a);a.link=l(function(a){if(a=q(a)){a=p(a);var b={};b.id=a;b.set=l(h,b,this);b.get=l(t,b,this);b.getData=l(m,b,this);return b}},a);var c=function(){var a={store:{},linkStore:{}};document.head.getAttribute("data-docile-store")||document.head.setAttribute("data-docile-store",'{"store":{},"linkStore":{}}');try{a=JSON.parse(document.head.getAttribute("data-docile-store"))}catch(k){n("Data could not be resumed.")}return a}();
a.store=c.store||{};a.linkStore=c.linkStore||{};window.addEventListener("DOMContentLoaded",function(){d=!0});e.exports=a}]);
