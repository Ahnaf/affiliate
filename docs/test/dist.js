window.Affiliate=function(e){function a(f){if(d[f])return d[f].exports;var h=d[f]={i:f,l:!1,exports:{}};e[f].call(h.exports,h,h.exports,a);h.l=!0;return h.exports}var d={};a.m=e;a.c=d;a.d=function(f,h,g){a.o(f,h)||Object.defineProperty(f,h,{configurable:!1,enumerable:!0,get:g})};a.n=function(f){var h=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(h,"a",h);return h};a.o=function(a,h){return Object.prototype.hasOwnProperty.call(a,h)};a.p="";return a(a.s=0)}([function(e,a,d){var f=
d(1),h=d(5),g=[],m=function(){var a={},h;for(h in arguments)for(var f in arguments[h])a[f]=arguments[h][f];return a},p=function(a){if(console&&console.log&&console.error){var h=Array.prototype.slice.call(arguments,1);(a?console.error:console.log).apply(console,["[Affiliate] "].concat(h))}},k=function(a){a=m({log:!1,tags:[]},a);var g=[];for(b in a.tags)a.tags[b]=m({hosts:[],query:{},replace:[]},a.tags[b]),g=g.concat(a.tags[b].hosts);var d=!0,c=!1;var b=window.MutationObserver||window.WebKitMutationObserver||
window.MozMutationObserver;"undefined"===typeof b&&(d=!1);var n=function(b){a.log&&p(!1,"Traversing DOM...");var c=b.getElementsByTagName("a"),n=[];for(d in c)c.hasOwnProperty(d)&&(n[d]=c[d]);"a"===b.nodeName.toLowerCase()&&(n=[b]);a.log&&p(!1,n);for(var u in n)if(b=void 0,(c=n[u])&&c.getAttribute("href")){var d=f(c.getAttribute("href")||"",!0);if(-1!==g.indexOf(d.host))for(b in a.tags)if(0<=a.tags[b].hosts.indexOf(d.host)){var w=void 0,e=d,t=c,k=a.tags[b],r=h.get(t)||{};if(!r.to||r.to!==e.href){r=
e.href;a.log&&p(!1,"Discovered URL: "+e.href);e.set("query",m(e.query,k.query));if("function"===typeof k.modifyPath)try{e.set("pathname",k.modifyPath(e.pathname))}catch(x){p(!0,x)}if("function"===typeof k.modifyHost)try{e.set("host",k.modifyHost(e.host))}catch(x){p(!0,x)}e=e.href;for(w in k.replace)e=e.replace(k.replace[w].from,k.replace[w].to);t.setAttribute("href",e);h.set(t,{href:r,to:e})}}}};d&&(this.observer=new b(function(b){a.log&&p(!1,"DOM Mutation",b);for(var c in b){if("attributes"===b[c].type){if("href"!==
b[c].attributeName)continue;var f=b[c].target.getAttribute("href"),d=h.get(b[c].target)||{};if(d.to&&d.to===f)continue}n(b[c].target)}}));var u=this;this.attach=function(){if(!c){if("complete"===document.readyState||"interactive"===document.readyState)c=!0,n(document.body);else return window.addEventListener("DOMContentLoaded",this.attach);d?u.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}):a.log&&p(!1,"Browser does not support MutationObserver.")}};this.detach=
function(){d&&(c=!1,u.observer.disconnect(),a.log&&p(!1,"Observer disconnected."))}},l=function(a){a=new k(a);g.push(a);return a};l.instances=function(){return[].concat(g)};l.detachAll=function(){for(var a in g)g[a].detach()};l.revert=function(){l.detachAll();var a=[].slice.call(document.body.getElementsByTagName("a")),f;for(f in a){var d=h.get(a[f]);d&&d.href&&(a[f].setAttribute("href",d.href),h.set(a[f],{}))}};e.exports=l},function(e,a,d){(function(a){function h(c){c=c||a.location||{};var b={},
n=typeof c,f;if("blob:"===c.protocol)b=new m(unescape(c.pathname),{});else if("string"===n)for(f in b=new m(c,{}),v)delete b[f];else if("object"===n){for(f in c)f in v||(b[f]=c[f]);void 0===b.slashes&&(b.slashes=t.test(c.href))}return b}function f(c){c=l.exec(c);return{protocol:c[1]?c[1].toLowerCase():"",slashes:!!c[2],rest:c[3]}}function m(c,b,a){if(!(this instanceof m))return new m(c,b,a);var n=r.slice();var d=typeof b;var e=0;"object"!==d&&"string"!==d&&(a=b,b=null);a&&"function"!==typeof a&&(a=
k.parse);b=h(b);var g=f(c||"");d=!g.protocol&&!g.slashes;this.slashes=g.slashes||d&&b.slashes;this.protocol=g.protocol||b.protocol||"";c=g.rest;for(g.slashes||(n[2]=[/(.*)/,"pathname"]);e<n.length;e++){g=n[e];var q=g[0];var l=g[1];if(q!==q)this[l]=c;else if("string"===typeof q)~(q=c.indexOf(q))&&("number"===typeof g[2]?(this[l]=c.slice(0,q),c=c.slice(q+g[2])):(this[l]=c.slice(q),c=c.slice(0,q)));else if(q=q.exec(c))this[l]=q[1],c=c.slice(0,q.index);this[l]=this[l]||(d&&g[3]?b[l]||"":"");g[4]&&(this[l]=
this[l].toLowerCase())}a&&(this.query=a(this.query));if(d&&b.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==b.pathname)){c=this.pathname;b=(b.pathname||"/").split("/").slice(0,-1).concat(c.split("/"));c=b.length;a=b[c-1];n=!1;for(e=0;c--;)"."===b[c]?b.splice(c,1):".."===b[c]?(b.splice(c,1),e++):e&&(0===c&&(n=!0),b.splice(c,1),e--);n&&b.unshift("");"."!==a&&".."!==a||b.push("");this.pathname=b.join("/")}p(this.port,this.protocol)||(this.host=this.hostname,this.port="");this.username=
this.password="";this.auth&&(g=this.auth.split(":"),this.username=g[0]||"",this.password=g[1]||"");this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null";this.href=this.toString()}var p=d(3),k=d(4),l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,t=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,r=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],v={hash:1,query:1};m.prototype={set:function(c,
b,a){switch(c){case "query":"string"===typeof b&&b.length&&(b=(a||k.parse)(b));this[c]=b;break;case "port":this[c]=b;p(b,this.protocol)?b&&(this.host=this.hostname+":"+b):(this.host=this.hostname,this[c]="");break;case "hostname":this[c]=b;this.port&&(b+=":"+this.port);this.host=b;break;case "host":this[c]=b;/:\d+$/.test(b)?(b=b.split(":"),this.port=b.pop(),this.hostname=b.join(":")):(this.hostname=b,this.port="");break;case "protocol":this.protocol=b.toLowerCase();this.slashes=!a;break;case "pathname":case "hash":b?
(a="pathname"===c?"/":"#",this[c]=b.charAt(0)!==a?a+b:b):this[c]=b;break;default:this[c]=b}for(c=0;c<r.length;c++)b=r[c],b[4]&&(this[b[1]]=this[b[1]].toLowerCase());this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null";this.href=this.toString();return this},toString:function(a){a&&"function"===typeof a||(a=k.stringify);var b=this.protocol;b&&":"!==b.charAt(b.length-1)&&(b+=":");b+=this.slashes?"//":"";this.username&&(b+=this.username,this.password&&(b+=
":"+this.password),b+="@");b+=this.host+this.pathname;(a="object"===typeof this.query?a(this.query):this.query)&&(b+="?"!==a.charAt(0)?"?"+a:a);this.hash&&(b+=this.hash);return b}};m.extractProtocol=f;m.location=h;m.qs=k;e.exports=m}).call(a,d(2))},function(e,a){a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(d){"object"===typeof window&&(a=window)}e.exports=a},function(e,a,d){e.exports=function(a,d){d=d.split(":")[0];a=+a;if(!a)return!1;switch(d){case "http":case "ws":return 80!==
a;case "https":case "wss":return 443!==a;case "ftp":return 21!==a;case "gopher":return 70!==a;case "file":return!1}return 0!==a}},function(e,a,d){var f=Object.prototype.hasOwnProperty;a.stringify=function(a,d){d=d||"";var e=[];"string"!==typeof d&&(d="?");for(var g in a)f.call(a,g)&&e.push(encodeURIComponent(g)+"="+encodeURIComponent(a[g]));return e.length?d+e.join("&"):""};a.parse=function(a){for(var d=/([^=?&]+)=?([^&]*)/g,e={},f;f=d.exec(a);e[decodeURIComponent(f[1].replace(/\+/g," "))]=decodeURIComponent(f[2].replace(/\+/g,
" ")));return e}},function(e,a,d){e.exports=d(6)},function(e,a){var d=0<=["loaded","interactive","complete"].indexOf(document.readyState),f=Function.prototype.bind,h=Array.prototype.slice,g=function(b,a){if(f&&b.bind===f)return f.apply(b,h.call(arguments,1));var c=h.call(arguments,2);return function(){return b.apply(a,c.concat(h.call(arguments)))}},m=function(){console&&console.error&&g(console.error,console,"Docile: ")(arguments)},p=function(b){var a=b.getAttribute("data-docile-id");a||(a=Math.random().toString(36).substr(2),
b.setAttribute("data-docile-id",a));return a},k=function(b){if(!d)return m("DOM not loaded. Learn more: https://goo.gl/EsYspK"),null;if("object"===typeof b||"string"===typeof b&&(b=document.getElementById(b)))return b;m("Unable to resolve node.")},l=function(b,a){try{document.head.setAttribute("data-docile-store",JSON.stringify({store:b,linkStore:a}))}catch(u){m("Data could not be saved.")}},t=function(b,a,c){b.linkStore[this.id]=b.linkStore[this.id]||{};if("string"===typeof a){c=k(c);if(!c)return;
b.linkStore[this.id][a]=p(c)}else if("object"===typeof a)for(var d in a)this.set(d,a[d]);l(b.store,b.linkStore);return this},r=function(b,a){b.linkStore[this.id]=b.linkStore[this.id]||{};if(a)return"string"!==typeof a?m("Link name must be a string."):document.querySelector('[data-docile-id="'+b.linkStore[this.id][a]+'"]');a={};for(var c in b.linkStore[this.id])a[c]=document.querySelector('[data-docile-id="'+b.linkStore[this.id][c]+'"]');return a},v=function(b,a){if(a)return b.get(this.get(a));a=this.get();
for(var c in a)a[c]=b.get(a[c]);return a};a={};a.get=g(function(b){if(b=k(b))return b=p(b),this.store[b]},a);a.set=g(function(b,a){if(b=k(b))return b=p(b),this.store[b]=a,l(this.store,this.linkStore),this},a);a.link=g(function(b){if(b=k(b)){b=p(b);var a={};a.id=b;a.set=g(t,a,this);a.get=g(r,a,this);a.getData=g(v,a,this);return a}},a);var c=function(){var a={store:{},linkStore:{}};document.head.getAttribute("data-docile-store")||document.head.setAttribute("data-docile-store",'{"store":{},"linkStore":{}}');
try{a=JSON.parse(document.head.getAttribute("data-docile-store"))}catch(n){m("Data could not be resumed.")}return a}();a.store=c.store||{};a.linkStore=c.linkStore||{};window.addEventListener("DOMContentLoaded",function(){d=!0});e.exports=a}]);
