window.Affiliate=function(e){function c(h){if(d[h])return d[h].exports;var l=d[h]={i:h,l:!1,exports:{}};e[h].call(l.exports,l,l.exports,c);l.l=!0;return l.exports}var d={};c.m=e;c.c=d;c.d=function(h,l,p){c.o(h,l)||Object.defineProperty(h,l,{configurable:!1,enumerable:!0,get:p})};c.n=function(h){var l=h&&h.__esModule?function(){return h["default"]}:function(){return h};c.d(l,"a",l);return l};c.o=function(c,l){return Object.prototype.hasOwnProperty.call(c,l)};c.p="";return c(c.s=0)}([function(e,c,d){var h=
"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"===typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},l=d(1),p=d(5),f=[],r=function(){var k={},c;for(c in arguments)for(var b in arguments[c])k[b]=arguments[c][b];return k},n=function(k){if("object"===("undefined"===typeof console?"undefined":h(console))){var c=Array.prototype.slice.call(arguments,1),b=k?console.error:console.log;b=Function.prototype.bind.call(b,
console);b.apply(console,["[Affiliate] "].concat(c))}},v=function(k){k=r({log:!1,tags:[]},k);var c=[];for(g in k.tags)k.tags[g]=r({hosts:[],query:{},replace:[]},k.tags[g]),c=c.concat(k.tags[g].hosts);var b=!0,a=!1;var g=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;"undefined"===typeof g&&(b=!1);var h=function(a){k.log&&n(!1,"Traversing DOM...");var b=a.getElementsByTagName("a"),g=[];for(f in b)b.hasOwnProperty(f)&&(g[f]=b[f]);"a"===a.nodeName.toLowerCase()&&(g=
[a]);k.log&&n(!1,g);for(var h in g)if(a=void 0,(b=g[h])&&b.getAttribute("href")){var f=l(b.getAttribute("href")||"",!0);if(-1!==c.indexOf(f.host))for(a in k.tags)if(0<=k.tags[a].hosts.indexOf(f.host)){var w=void 0,d=f,e=b,u=k.tags[a],m=p.get(e)||{};if(!m.to||m.to!==d.href){m=d.href;k.log&&n(!1,"Discovered URL: "+d.href);d.set("query",r(d.query,u.query));if("function"===typeof u.modifyPath)try{d.set("pathname",u.modifyPath(d.pathname))}catch(x){n(!0,x)}if("function"===typeof u.modifyHost)try{d.set("host",
u.modifyHost(d.host))}catch(x){n(!0,x)}d=d.href;for(w in u.replace)d=d.replace(u.replace[w].from,u.replace[w].to);e.setAttribute("href",d);p.set(e,{href:m,to:d})}}}};b&&(this.observer=new g(function(a){k.log&&n(!1,"DOM Mutation",a);for(var b in a){if("attributes"===a[b].type){if("href"!==a[b].attributeName)continue;var g=a[b].target.getAttribute("href"),c=p.get(a[b].target)||{};if(c.to&&c.to===g)continue}h(a[b].target)}}));var f=this;this.attach=function(){if(!a){if("complete"===document.readyState||
"interactive"===document.readyState)a=!0,h(document.body);else return window.addEventListener("DOMContentLoaded",this.attach);b?f.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}):k.log&&n(!1,"Browser does not support MutationObserver.")}};this.detach=function(){b&&(a=!1,f.observer.disconnect(),k.log&&n(!1,"Observer disconnected."))}},t=function(c){c=new v(c);f.push(c);return c};t.instances=function(){return[].concat(f)};t.detachAll=function(){for(var c in f)f[c].detach()};
t.revert=function(){t.detachAll();var c=[].slice.call(document.body.getElementsByTagName("a")),f;for(f in c){var b=p.get(c[f]);b&&b.href&&(c[f].setAttribute("href",b.href),p.set(c[f],{}))}};e.exports=t},function(e,c,d){(function(c){function h(b){b=b||c.location||{};var a={},g=typeof b,h;if("blob:"===b.protocol)a=new f(unescape(b.pathname),{});else if("string"===g)for(h in a=new f(b,{}),m)delete a[h];else if("object"===g){for(h in b)h in m||(a[h]=b[h]);void 0===a.slashes&&(a.slashes=t.test(b.href))}return a}
function p(b){b=v.exec(b);return{protocol:b[1]?b[1].toLowerCase():"",slashes:!!b[2],rest:b[3]}}function f(b,a,g){if(!(this instanceof f))return new f(b,a,g);var c=k.slice();var d=typeof a;var l=0;"object"!==d&&"string"!==d&&(g=a,a=null);g&&"function"!==typeof g&&(g=n.parse);a=h(a);var e=p(b||"");d=!e.protocol&&!e.slashes;this.slashes=e.slashes||d&&a.slashes;this.protocol=e.protocol||a.protocol||"";b=e.rest;for(e.slashes||(c[2]=[/(.*)/,"pathname"]);l<c.length;l++){e=c[l];var q=e[0];var m=e[1];if(q!==
q)this[m]=b;else if("string"===typeof q)~(q=b.indexOf(q))&&("number"===typeof e[2]?(this[m]=b.slice(0,q),b=b.slice(q+e[2])):(this[m]=b.slice(q),b=b.slice(0,q)));else if(q=q.exec(b))this[m]=q[1],b=b.slice(0,q.index);this[m]=this[m]||(d&&e[3]?a[m]||"":"");e[4]&&(this[m]=this[m].toLowerCase())}g&&(this.query=g(this.query));if(d&&a.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==a.pathname)){b=this.pathname;a=(a.pathname||"/").split("/").slice(0,-1).concat(b.split("/"));b=a.length;g=
a[b-1];c=!1;for(l=0;b--;)"."===a[b]?a.splice(b,1):".."===a[b]?(a.splice(b,1),l++):l&&(0===b&&(c=!0),a.splice(b,1),l--);c&&a.unshift("");"."!==g&&".."!==g||a.push("");this.pathname=a.join("/")}r(this.port,this.protocol)||(this.host=this.hostname,this.port="");this.username=this.password="";this.auth&&(e=this.auth.split(":"),this.username=e[0]||"",this.password=e[1]||"");this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null";this.href=this.toString()}var r=
d(3),n=d(4),v=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,t=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,k=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],m={hash:1,query:1};f.prototype={set:function(b,a,g){switch(b){case "query":"string"===typeof a&&a.length&&(a=(g||n.parse)(a));this[b]=a;break;case "port":this[b]=a;r(a,this.protocol)?a&&(this.host=this.hostname+":"+a):(this.host=this.hostname,this[b]="");break;case "hostname":this[b]=
a;this.port&&(a+=":"+this.port);this.host=a;break;case "host":this[b]=a;/:\d+$/.test(a)?(a=a.split(":"),this.port=a.pop(),this.hostname=a.join(":")):(this.hostname=a,this.port="");break;case "protocol":this.protocol=a.toLowerCase();this.slashes=!g;break;case "pathname":case "hash":a?(g="pathname"===b?"/":"#",this[b]=a.charAt(0)!==g?g+a:a):this[b]=a;break;default:this[b]=a}for(b=0;b<k.length;b++)a=k[b],a[4]&&(this[a[1]]=this[a[1]].toLowerCase());this.origin=this.protocol&&this.host&&"file:"!==this.protocol?
this.protocol+"//"+this.host:"null";this.href=this.toString();return this},toString:function(b){b&&"function"===typeof b||(b=n.stringify);var a=this.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");a+=this.slashes?"//":"";this.username&&(a+=this.username,this.password&&(a+=":"+this.password),a+="@");a+=this.host+this.pathname;(b="object"===typeof this.query?b(this.query):this.query)&&(a+="?"!==b.charAt(0)?"?"+b:b);this.hash&&(a+=this.hash);return a}};f.extractProtocol=p;f.location=h;f.qs=n;e.exports=
f}).call(c,d(2))},function(e,c){c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(d){"object"===typeof window&&(c=window)}e.exports=c},function(e,c,d){e.exports=function(c,d){d=d.split(":")[0];c=+c;if(!c)return!1;switch(d){case "http":case "ws":return 80!==c;case "https":case "wss":return 443!==c;case "ftp":return 21!==c;case "gopher":return 70!==c;case "file":return!1}return 0!==c}},function(e,c,d){var h=Object.prototype.hasOwnProperty;c.stringify=function(c,
d){d=d||"";var f=[];"string"!==typeof d&&(d="?");for(var e in c)h.call(c,e)&&f.push(encodeURIComponent(e)+"="+encodeURIComponent(c[e]));return f.length?d+f.join("&"):""};c.parse=function(c){for(var d=/([^=?&]+)=?([^&]*)/g,f={},e;e=d.exec(c);f[decodeURIComponent(e[1].replace(/\+/g," "))]=decodeURIComponent(e[2].replace(/\+/g," ")));return f}},function(e,c,d){e.exports=d(6)},function(e,c){var d=0<=["loaded","interactive","complete"].indexOf(document.readyState),h=Function.prototype.bind,l=Array.prototype.slice,
p=function(a,b){if(h&&a.bind===h)return h.apply(a,l.call(arguments,1));var c=l.call(arguments,2);return function(){return a.apply(b,c.concat(l.call(arguments)))}},f=function(){if("object"===typeof console){var a=Array.prototype.slice.call(arguments);Function.prototype.bind.call(console.error,console).apply(console,["[Docile] "].concat(a))}},r=function(a){var b=a.getAttribute("data-docile-id");b||(b=Math.random().toString(36).substr(2),a.setAttribute("data-docile-id",b));return b},n=function(a){if(!d)return f("DOM not loaded. Learn more: https://goo.gl/EsYspK"),
null;if("object"===typeof a||"string"===typeof a&&(a=document.getElementById(a)))return a;f("Unable to resolve node.")},v=function(a,b){try{document.head.setAttribute("data-docile-store",JSON.stringify({store:a,linkStore:b}))}catch(w){f("Data could not be saved.")}},t=function(a,b,c){a.linkStore[this.id]=a.linkStore[this.id]||{};if("string"===typeof b){c=n(c);if(!c)return;a.linkStore[this.id][b]=r(c)}else if("object"===typeof b)for(var g in b)this.set(g,b[g]);v(a.store,a.linkStore);return this},k=
function(a,b){a.linkStore[this.id]=a.linkStore[this.id]||{};if(b)return"string"!==typeof b?f("Link name must be a string."):document.querySelector('[data-docile-id="'+a.linkStore[this.id][b]+'"]');b={};for(var c in a.linkStore[this.id])b[c]=document.querySelector('[data-docile-id="'+a.linkStore[this.id][c]+'"]');return b},m=function(a,b){if(b)return a.get(this.get(b));b=this.get();for(var c in b)b[c]=a.get(b[c]);return b};c={};c.get=p(function(a){if(a=n(a))return a=r(a),this.store[a]},c);c.set=p(function(a,
b){if(a=n(a))return a=r(a),this.store[a]=b,v(this.store,this.linkStore),this},c);c.link=p(function(a){if(a=n(a)){a=r(a);var b={};b.id=a;b.set=p(t,b,this);b.get=p(k,b,this);b.getData=p(m,b,this);return b}},c);var b=function(){var a={store:{},linkStore:{}};document.head.getAttribute("data-docile-store")||document.head.setAttribute("data-docile-store",'{"store":{},"linkStore":{}}');try{a=JSON.parse(document.head.getAttribute("data-docile-store"))}catch(g){f("Data could not be resumed.")}return a}();
c.store=b.store||{};c.linkStore=b.linkStore||{};window.addEventListener("DOMContentLoaded",function(){d=!0});e.exports=c}]);
